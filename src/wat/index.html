<!DOCTYPE html>
<html>
<head>
    <title>Teste Compilador SL</title>
</head>
<body>
    <h1>Abra o Console (F12) para ver o resultado</h1>
    <script>
        // Objeto de importação que o WASM espera
        const importObject = {
            env: {
                print: (arg) => console.log("Saída do WASM:", arg)
            }
        };

        // Carrega e executa o WASM
        WebAssembly.instantiateStreaming(fetch('fatorial.wasm'), importObject)
            .then(obj => {
                console.log("Módulo carregado com sucesso!");
                
                // O código gerado exporta a função "main", vamos chamá-la
                if (obj.instance.exports.main) {
                    obj.instance.exports.main();
                } else {
                    console.error("Função main não encontrada nas exportações.");
                }
            })
            .catch(err => console.error("Erro ao carregar WASM:", err));
    </script>
</body>
</html>